<?xml version="1.0"?>

<launch>
    <!-- bunch_of_sticks / f1_aut_wide / f1_aut_wide_obstacles / f1_aut / f1_mco / f1_gbr / f1_esp / test -->
    <arg name="map"  default="bunch_of_sticks"/>

    <include file="$(find f1tenth_simulator)/launch/simulator.launch">
        <arg name="map" value="$(find f1tenth_simulator)/maps/$(arg map).yaml"/>
        <arg name="map_frame"  value="map"/>
    </include>

    <arg name="lookahead_distance" default="1"/>
    <arg name="steering_gain" default="0.5"/>
    <arg name="max_speed"  default="4"/>
    <arg name="min_speed"  default="1.5"/>
    <arg name="velocity_gain"  default="1"/>
    <arg name="basic_velocity"  default="False"/>
    <node name="pure_pursuit" pkg="pure_pursuit" type="pure_pursuit.py" output="screen">
        <param name="lookahead_distance" value="$(arg lookahead_distance)"/>
        <param name="steering_gain" value="$(arg steering_gain)"/>
        <param name="max_speed"  value="$(arg max_speed)"/>
        <param name="min_speed"  value="$(arg min_speed)"/>
        <param name="velocity_gain"  value="$(arg velocity_gain)"/>
        <param name="basic_velocity"  value="$(arg basic_velocity)"/>
    </node>

    <arg name="use_gradient_descent"  default="False"/>
    <arg name="wall_distance"  default="0.4"/>
    <arg name="path_sparseness"  default="0.1"/>
    <node name="planner" pkg="pure_pursuit" type="planner.py" output="screen">
         <param name="use_gradient_descent"  value="$(arg use_gradient_descent)"/>
         <param name="wall_distance"  value="$(arg wall_distance)"/>
         <param name="path_sparseness"  value="$(arg path_sparseness)"/>
         <param name="map_name"  value="$(arg map)"/>
    </node>
</launch>
